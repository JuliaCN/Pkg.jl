<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>10. Project.toml and Manifest.toml · Pkg.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://ioxera.github.io/Pkg.jl/dev/toml-files/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Pkg.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Pkg.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../"><strong>1.</strong> 简介</a></li><li><a class="tocitem" href="../getting-started/"><strong>2.</strong> 入门</a></li><li><a class="tocitem" href="../managing-packages/"><strong>3.</strong> 管理包</a></li><li><a class="tocitem" href="../environments/"><strong>4.</strong> 使用“环境”</a></li><li><a class="tocitem" href="../creating-packages/"><strong>5.</strong> 创建包</a></li><li><a class="tocitem" href="../compatibility/"><strong>6.</strong> 兼容性</a></li><li><a class="tocitem" href="../registries/"><strong>7.</strong> 注册表</a></li><li><a class="tocitem" href="../artifacts/"><strong>8.</strong> Artifacts</a></li><li><a class="tocitem" href="../glossary/"><strong>9.</strong> 词汇表</a></li><li class="is-active"><a class="tocitem" href><strong>10.</strong> <code>Project.toml</code> and <code>Manifest.toml</code></a><ul class="internal"><li><a class="tocitem" href="#Project.toml"><span><code>Project.toml</code></span></a></li><li><a class="tocitem" href="#Manifest.toml"><span><code>Manifest.toml</code></span></a></li></ul></li><li><a class="tocitem" href="../repl/"><strong>11.</strong> REPL Mode Reference</a></li><li><a class="tocitem" href="../api/"><strong>12.</strong> API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href><strong>10.</strong> <code>Project.toml</code> and <code>Manifest.toml</code></a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href><strong>10.</strong> <code>Project.toml</code> and <code>Manifest.toml</code></a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ioxera/Pkg.jl/blob/master/docs/src/toml-files.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Project-and-Manifest"><a class="docs-heading-anchor" href="#Project-and-Manifest"><strong>10.</strong> <code>Project.toml</code> and <code>Manifest.toml</code></a><a id="Project-and-Manifest-1"></a><a class="docs-heading-anchor-permalink" href="#Project-and-Manifest" title="Permalink"></a></h1><p>Pkg 的两个核心文件是 <code>Project.toml</code> 和 <code>Manifest.toml</code>。<code>Project.toml</code> 和 <code>Manifest.toml</code> 都是用 <a href="https://github.com/toml-lang/toml">TOML</a>（因此是 <code>.toml</code> 扩展名）编写的，包括有关依赖项、版本、包名称、UUID 等的信息。</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>Project.toml</code> 和 <code>Manifest.toml</code> 文件不仅由包管理器使用；Julia 的代码加载也使用它们，并确定例如 <code>using Example</code> 应该做什么。有关更多详细信息，请参阅 Julia 手册中有关 <a href="https://docs.julialang.org/en/v1/manual/code-loading/">代码加载</a> 的部分。</p></div></div><h2 id="Project.toml"><a class="docs-heading-anchor" href="#Project.toml"><code>Project.toml</code></a><a id="Project.toml-1"></a><a class="docs-heading-anchor-permalink" href="#Project.toml" title="Permalink"></a></h2><p>项目文件从高层次上描述了项目，例如，项目文件中列出了包/项目的依赖关系和兼容性约束。文件条目如下所述。</p><h3 id="authors-字段"><a class="docs-heading-anchor" href="#authors-字段"><code>authors</code> 字段</a><a id="authors-字段-1"></a><a class="docs-heading-anchor-permalink" href="#authors-字段" title="Permalink"></a></h3><p>对于包，<code>authors</code> 可选字段是描述包作者的字符串列表，格式为 <code>NAME &lt;EMAIL&gt;</code>。例如：</p><pre><code class="language-toml hljs">authors = [&quot;Some One &lt;someone@email.com&gt;&quot;,
           &quot;Foo Bar &lt;foo@bar.com&gt;&quot;]</code></pre><h3 id="name-字段"><a class="docs-heading-anchor" href="#name-字段"><code>name</code> 字段</a><a id="name-字段-1"></a><a class="docs-heading-anchor-permalink" href="#name-字段" title="Permalink"></a></h3><p>包/项目的名称由 <code>name</code> 字段决定，例如：</p><pre><code class="language-toml hljs">name = &quot;Example&quot;</code></pre><p>名称必须是有效<a href="https://docs.julialang.org/en/v1/base/base/#Base.isidentifier">标识符</a>（不以数字开头且既不是 <code>true</code> 也不是的 <code>false</code>  Unicode 字符序列）。对于包，建议遵循 <a href="../creating-packages/#Package-naming-guidelines">包命名准则</a>。<code>name</code> 字段对于包是必需的。</p><h3 id="uuid-字段"><a class="docs-heading-anchor" href="#uuid-字段"><code>uuid</code> 字段</a><a id="uuid-字段-1"></a><a class="docs-heading-anchor-permalink" href="#uuid-字段" title="Permalink"></a></h3><p><code>uuid</code> 是包/项目 <a href=" https:/en.wikipedia.org/wiki/Universally_unique_identifier ">通用唯一标识符</a> 字符串，例如：</p><pre><code class="language-toml hljs">uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;</code></pre><p><code>uuid</code> 字段对于包是必需的。</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>建议使用 <code>UUIDs.uuid4()</code> 生成随机 UUID。</p></div></div><h3 id="version-字段"><a class="docs-heading-anchor" href="#version-字段"><code>version</code> 字段</a><a id="version-字段-1"></a><a class="docs-heading-anchor-permalink" href="#version-字段" title="Permalink"></a></h3><p><code>version</code> 是包/项目版本号的字符串。它应该由三个数字组成：主要版本号、次要版本号和补丁号，用 <code>.</code> 分隔，例如：</p><pre><code class="language-toml hljs">version = &quot;1.2.5&quot;</code></pre><p>Julia 使用<a href="https://semver.org/">语义版本控制</a>(SemVer)，该 <code>version</code> 字段应遵循 SemVer。基本规则是：</p><ul><li>在 1.0.0 之前，一切正常，但是当您进行重大更改时，次要版本应该增加。</li><li>在 1.0.0 之后，仅在增加主要版本时进行重大更改。</li><li>在 1.0.0 之后，如果不增加次要版本，则不应添加新的公共 API。这尤其包括来自 <code>Base</code> 或其他包的新类型、函数、方法和方法重载 。</li></ul><p>另请参阅<a href="../compatibility/#Compatibility">兼容性</a>部分。</p><p>请注意，当涉及到 1.0.0 之前的版本时，<code>Pkg.jl</code> 偏离了 SemVer 规范。有关详细信息，请参阅 <a href="../compatibility/#compat-pre-1.0">pre-1.0 行为</a> 部分。</p><h3 id="[deps]-节"><a class="docs-heading-anchor" href="#[deps]-节"><code>[deps]</code> 节</a><a id="[deps]-节-1"></a><a class="docs-heading-anchor-permalink" href="#[deps]-节" title="Permalink"></a></h3><p>该节列出了包/项目的所有依赖项[deps]。每个依赖项都以“名称-uuid”对的形式列出，例如：</p><pre><code class="language-toml hljs">[deps]
Example = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;
Test = &quot;8dfed614-e22c-5e08-85e1-65c5234f0b40&quot;</code></pre><p>通常不需要手动向 <code>[deps]</code> 节添加条目；这由 Pkg 操作来处理，例如 <code>add</code>。</p><h3 id="[compat]-节"><a class="docs-heading-anchor" href="#[compat]-节"><code>[compat]</code> 节</a><a id="[compat]-节-1"></a><a class="docs-heading-anchor-permalink" href="#[compat]-节" title="Permalink"></a></h3><p><code>[deps]</code> 下面列出的依赖项的兼容性约束可以在该 <code>[compat]</code> 节中列出。例子：</p><pre><code class="language-toml hljs">[deps]
Example = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;

[compat]
Example = &quot;1.2&quot;</code></pre><p>兼容性章节详细描述了不同的可能兼容性约束。也可以列出 <code>julia</code> 自身的约束，尽管 <code>julia</code> 未在 <code>[deps]</code> 节中列为依赖项：</p><pre><code class="language-toml hljs">[compat]
julia = &quot;1.1&quot;</code></pre><h2 id="Manifest.toml"><a class="docs-heading-anchor" href="#Manifest.toml"><code>Manifest.toml</code></a><a id="Manifest.toml-1"></a><a class="docs-heading-anchor-permalink" href="#Manifest.toml" title="Permalink"></a></h2><p>manifest 文件是环境中包状态的绝对记录。它包括有关项目（直接和间接）依赖项的确切信息。给定一对 <code>Project.toml</code> 和 <code>Manifest.toml</code>，可以实例化完全相同的包环境，这对于可复现性非常有用。有关详细信息，请参阅 <a href="../api/#Pkg.instantiate"><code>Pkg.instantiate</code></a>。</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>Manifest.toml</code> 文件由 Pkg 生成和维护，一般情况下，不应手动修改此文件。</p></div></div><h3 id="Manifest.toml-条目"><a class="docs-heading-anchor" href="#Manifest.toml-条目"><code>Manifest.toml</code> 条目</a><a id="Manifest.toml-条目-1"></a><a class="docs-heading-anchor-permalink" href="#Manifest.toml-条目" title="Permalink"></a></h3><p>manifest 中有三个顶级条目，如下所示：</p><pre><code class="language-toml hljs">julia_version = &quot;1.8.2&quot;
manifest_format = &quot;2.0&quot;
project_hash = &quot;4d9d5b552a1236d3c1171abf88d59da3aaac328a&quot;</code></pre><p>这显示了创建 manifest 的 Julia 版本、manifest 的“格式”和项目文件的哈希值，这样就可以看到 manifest 与项目文件相比什么时候过时了。</p><p>每个依赖项在 manifest 文件中都有自己的节，其内容根据依赖项添加到环境的方式而有所不同。每个依赖项的节都包含以下条目的组合：</p><ul><li><code>uuid</code>: 依赖项的 <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>，例如 <code>uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;</code>。</li><li><code>deps</code>: 一个向量，列出依赖项的依赖项，例如 <code>deps = [&quot;Example&quot;, &quot;JSON&quot;]</code>。</li><li><code>version</code>: 版本号，例如 <code>version = &quot;1.2.6&quot;</code>。</li><li><code>path</code>: 源代码的文件路径，例如 <code>path = /home/user/Example</code>。</li><li><code>repo-url</code>: 源代码存储库的 URL ，例如 <code>repo-url = &quot;https://github.com/JuliaLang/Example.jl.git&quot;</code>。</li><li><code>repo-rev</code>: git 存储库的修订版, 例如一个分支 <code>repo-rev = &quot;master&quot;</code> 或一个提交 <code>repo-rev = &quot;66607a62a83cb07ab18c0b35c038fcd62987c9b1&quot;</code>。</li><li><code>git-tree-sha1</code>: git 源码树的哈希， 例如 <code>git-tree-sha1 = &quot;ca3820cc4e66f473467d912c4b2b3ae5dc968444&quot;</code>。</li></ul><h4 id="已添加的包"><a class="docs-heading-anchor" href="#已添加的包">已添加的包</a><a id="已添加的包-1"></a><a class="docs-heading-anchor-permalink" href="#已添加的包" title="Permalink"></a></h4><p>当从包注册表添加包时，例如通过调用 <code>pkg&gt; add Example</code> 或使用特定版本 <code>pkg&gt; add Example@1.2</code>，生成的 <code>Manifest.toml</code> 条目如下所示：</p><pre><code class="language-toml hljs">[[deps.Example]]
deps = [&quot;DependencyA&quot;, &quot;DependencyB&quot;]
git-tree-sha1 = &quot;8eb7b4d4ca487caade9ba3e85932e28ce6d6e1f8&quot;
uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;
version = &quot;1.2.3&quot;</code></pre><p>请特别注意，没有 <code>repo-url</code> 存在，因为该信息包含在能够找到此包的注册表中。</p><h4 id="按分支添加的包"><a class="docs-heading-anchor" href="#按分支添加的包">按分支添加的包</a><a id="按分支添加的包-1"></a><a class="docs-heading-anchor-permalink" href="#按分支添加的包" title="Permalink"></a></h4><p>添加由分支指定的包时生成的 <code>[deps]</code> 节，例如 <code>pkg&gt; add Example#masteror</code> 或 <code>pkg&gt; add https://github.com/JuliaLang/Example.jl.git</code>，如下所示：</p><pre><code class="language-toml hljs">[[deps.Example]]
deps = [&quot;DependencyA&quot;, &quot;DependencyB&quot;]
git-tree-sha1 = &quot;54c7a512469a38312a058ec9f429e1db1f074474&quot;
repo-rev = &quot;master&quot;
repo-url = &quot;https://github.com/JuliaLang/Example.jl.git&quot;
uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;
version = &quot;1.2.4&quot;</code></pre><p>请注意，我们正在跟踪的分支 (<code>master</code>) 和远程存储库 url (<code>&quot;https://github.com/JuliaLang/Example.jl.git&quot;</code>) 都存储在 manifest 中。</p><h4 id="按提交添加的包"><a class="docs-heading-anchor" href="#按提交添加的包">按提交添加的包</a><a id="按提交添加的包-1"></a><a class="docs-heading-anchor-permalink" href="#按提交添加的包" title="Permalink"></a></h4><p>添加由提交指定的包时生成的 <code>[deps]</code> 节，例如 <code>pkg&gt; add Example#cf6ba6cc0be0bb5f56840188563579d67048be34</code>，如下所示：</p><pre><code class="language-toml hljs">[[deps.Example]]
deps = [&quot;DependencyA&quot;, &quot;DependencyB&quot;]
git-tree-sha1 = &quot;54c7a512469a38312a058ec9f429e1db1f074474&quot;
repo-rev = &quot;cf6ba6cc0be0bb5f56840188563579d67048be34&quot;
repo-url = &quot;https://github.com/JuliaLang/Example.jl.git&quot;
uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;
version = &quot;1.2.4&quot;</code></pre><p>与跟踪分支的唯一区别是 <code>repo-rev</code> 的内容。</p><h4 id="开发包"><a class="docs-heading-anchor" href="#开发包">开发包</a><a id="开发包-1"></a><a class="docs-heading-anchor-permalink" href="#开发包" title="Permalink"></a></h4><p>使用 <code>develop</code> 命令添加包时生成的 <code>[deps]</code> 节，例如 <code>pkg&gt; develop Example</code> 或 <code>pkg&gt; develop /path/to/local/folder/Example</code>，如下所示：</p><pre><code class="language-toml hljs">[[deps.Example]]
deps = [&quot;DependencyA&quot;, &quot;DependencyB&quot;]
path = &quot;/home/user/.julia/dev/Example/&quot;
uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;
version = &quot;1.2.4&quot;</code></pre><p>请注意，包含源代码的路径，并且直接反映对该源代码树所做的更改。</p><h4 id="已固定的包"><a class="docs-heading-anchor" href="#已固定的包">已固定的包</a><a id="已固定的包-1"></a><a class="docs-heading-anchor-permalink" href="#已固定的包" title="Permalink"></a></h4><p>已固定的包也记录在 manifest 文件中，例如由 <code>pkg&gt; add Example; pin Example</code> 生成的 <code>[deps]</code> 节如下所示：</p><pre><code class="language-toml hljs">[[deps.Example]]
deps = [&quot;DependencyA&quot;, &quot;DependencyB&quot;]
git-tree-sha1 = &quot;54c7a512469a38312a058ec9f429e1db1f074474&quot;
pinned = true
uuid = &quot;7876af07-990d-54b4-ab0e-23690620f79a&quot;
version = &quot;1.2.4&quot;</code></pre><p>唯一的不同是附加了 <code>pinned = true</code> 条目。</p><h4 id="多个同名的包"><a class="docs-heading-anchor" href="#多个同名的包">多个同名的包</a><a id="多个同名的包-1"></a><a class="docs-heading-anchor-permalink" href="#多个同名的包" title="Permalink"></a></h4><p>Julia 根据 UUID 区分包，这意味着仅靠名称不足以识别包。在同一个环境中可以有多个包具有相同的名称，但具有不同的 UUID。在这种情况下，<code>Manifest.toml</code> 文件看起来有点不同。例如，考虑您已将包 <code>A</code> 和 <code>B</code> 添加到您的环境的情况，文件 <code>Project.toml</code> 如下所示：</p><pre><code class="language-toml hljs">[deps]
A = &quot;ead4f63c-334e-11e9-00e6-e7f0a5f21b60&quot;
B = &quot;edca9bc6-334e-11e9-3554-9595dbb4349c&quot;</code></pre><p>如果 <code>A</code> 现在依赖于 <code>B = &quot;f41f7b98-334e-11e9-1257-49272045fb24&quot;</code>，即<em>另一个</em>名为 <code>B</code> 的包，在 <code>Manifest.toml</code> 文件中将有两个不同的 <code>B</code> 包。在这种情况下，为清楚起见删除了 <code>git-tree-sha1</code> 和 <code>version</code> 字段的完整 <code>Manifest.toml</code> 文件如下所示：</p><pre><code class="language-toml hljs">[[deps.A]]
uuid = &quot;ead4f63c-334e-11e9-00e6-e7f0a5f21b60&quot;

    [deps.A.deps]
    B = &quot;f41f7b98-334e-11e9-1257-49272045fb24&quot;

[[deps.B]]
uuid = &quot;f41f7b98-334e-11e9-1257-49272045fb24&quot;
[[deps.B]]
uuid = &quot;edca9bc6-334e-11e9-3554-9595dbb4349c&quot;</code></pre><p>现在，有一个包含两个 <code>B</code> 包的数组，并且 <code>A</code> 包的 <code>[deps]</code> 节已扩展为明确说明 <code>A</code> 依赖于哪个 <code>B</code> 包。</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../glossary/">« <strong>9.</strong> 词汇表</a><a class="docs-footer-nextpage" href="../repl/"><strong>11.</strong> REPL Mode Reference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 10 November 2022 03:38">Thursday 10 November 2022</span>. Using Julia version 1.9.0-DEV.1786.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
